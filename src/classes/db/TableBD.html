<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Table with Bootstrap 5</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- DataTables CSS -->
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.25/css/jquery.dataTables.css">
    <!-- DataTables Buttons CSS -->
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/buttons/1.7.1/css/buttons.dataTables.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.0/font/bootstrap-icons.css">
    <link href="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <h1 class="tbTitle"></h1>
        <div class="d-flex justify-content-between mb-3">
            <div>
                <button id="exportCsv" class="btn btn-primary">Export to CSV</button>
                <button id="exportPdf" class="btn btn-secondary">Export to PDF</button>
            </div>
            <div>
                <input type="text" id="searchBox" class="form-control" placeholder="Search...">
            </div>
        </div>
        <table id="example" class="display table table-striped table-bordered" style="width:100%">
            <thead class="titleTable">
                <tr>
                    <th>Name</th>
                    <th>Position</th>
                    <th>Office</th>
                    <th>Age</th>
                    <th>Start date</th>
                    <th>
                        <button type="button" class="btn btn-info" id="bnew" data-bs-toggle="modal" data-bs-target="#frmIU" data-do="i"><i class="bi bi-plus"></i></button>
                        <button type="button" class="btn btn-info" id="bcsv" data-bs-toggle="modal" data-bs-target="#frmCSV" data-do="c"><i class="bi bi-inbox"></i></button>
                        <button type="button" class="btn btn-info" id="bdelm" data-do="dm"><i class="bi bi-file-earmark-excel-fill"></i></button>
                    </th>
                </tr>
            </thead>
            <tbody id="bodyTable">
                <tr>
                    <td>Tiger Nixon</td>
                    <td>System Architect</td>
                    <td>Edinburgh</td>
                    <td>61</td>
                    <td>2011/04/25</td>
                    <td>
                        <a href='' title='ver' class="bsee"><button type="button" class="btn btn-outline-info" data-do="e"><i class="bi bi-eye-fill"></i></button></a>
                        <button type="button" class="btn btn-outline-info bedit" data-bs-toggle="modal" data-bs-target="#frmIU" data-do="e"><i class="bi bi-pencil"></i></button>
                        <button type="button" class="btn btn-outline-info bdel" data-bs-toggle="modal" data-bs-target="#frmD" data-do="d"><i class="bi bi-trash"></i></button>
                    </td>
                </tr>
                <tr>
                    <td>Tiger Nixon</td>
                    <td>System Architect</td>
                    <td>Edinburgh</td>
                    <td>61</td>
                    <td>2011/04/25</td>
                    <td>$320,800</td>
                </tr>
                <tr>
                    <td>Tiger Nixon</td>
                    <td>System Architect</td>
                    <td>Edinburgh</td>
                    <td>61</td>
                    <td>2011/04/25</td>
                    <td>$320,800</td>
                </tr>
                <!-- More rows as needed -->
            </tbody>
            <thead class="titleTable">
                <tr>
                    <th>Name</th>
                    <th>Position</th>
                    <th>Office</th>
                    <th>Age</th>
                    <th>Start date</th>
                    <th>Salary</th>
                </tr>
            </thead>
        </table>
    </div>

      <!-- The Modal Inserir ou Actualizar-->
  <div class="modal" id="frmIU">
    <div class="modal-dialog">
      <div class="modal-content">
        <form action="" method="post">
          <input type="hidden" id="do" name="do" value="ci">
        
          <!-- Modal Header -->
          <div class="modal-header">
            <h1 class="modal-title" id="frmIOTitulo">Add/Update</h1>
            <button type="button" class="close" data-bs-dismiss="modal">×</button>
          </div>
          <!-- Modal body -->
          <div class="modal-body">
            <h3 class="tbTitle">Some text to enable scrolling..</h3>
            <div class="row">
              <div class="col-sm-12" id="frmIOH3">
                <div class="text">
                  <div class="form-group">
                    <label id="textL">Text input:</label>
                    <input type="text" class="form-control required" id="txtTarefa" value="">
                  </div>
                </div>
                <div class="password">
                  <div class="form-group">
                    <label id="passL">Pass input:</label>
                    <input type="password" class="form-control required" id="passN" value="">
                  </div>
                </div>
                <div class="select">
                  <div class="form-group">
                    <label id="selectL">List:</label>
                    <select class="form-select" id="selectLst">
                        <option value="icon-atom"  >ÁtomoXXX [icon-atom]</option>
                      </select>
                  </div>
                </div>
                <div class="date">
                  <div class="form-group">
                    <label id="dataL">Date:</label>
                    <input type="date" class="form-control required" name="txtData" id="txtData" value="txtData">
                  </div>
                </div>
                  <div class="file">
                    <div class="form-group">
                      <label id="fileL">Update:</label>
                      <input type="file" class="form-control required" id="fileN" value="" />
                      <button type="button" class="btn btn-outline-info"><i class="bi bi-upload"></i></button>
                    </div>
                  </div>
                <div class="textArea">
                  <div class="form-group">
                    <link href="http://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.8/summernote.css" rel="stylesheet">
                    <script src="http://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.8/summernote.js"></script>
                    <label id="textAreaL">Text area:</label>
                    <textarea id="textAreaN">...</textarea>

                  </div>
                </div>
                <div class="check">
                  <div class="form-group">
                    <div class="checkbox">
                      <label>
                          <input type="checkbox" id="checkN" checked>checkbox sample<br>
                        </label>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- Modal footer -->
          <div class="modal-footer">
            <div class="form-group">
              <p id="teste"></p>
              <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Close</button>
              <button class="btn btn-primary" aria-hidden="true" type="submit">Save</button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- The Modal delete-->
  <div class="modal fade" id="frmD">
    <div class="modal-dialog">
      <form action="" method="post">
        <input type="hidden" name="do" value="cd">
        <input type="hidden" id="deleteKey" name="id" value="">
        <div class="modal-content">
          <!-- Modal Header -->
          <div class="modal-header">
            <h4 class="modal-title">Confirmation</h4>
            <button type="button" class="close" data-bs-dismiss="modal">&times;</button>
          </div>
          <!-- Modal body -->
          <div class="modal-body" id="perguntaT">
            <p>Do you want delete the record?</p>
            <p id="delId"></p>
            <p id="delText"></p>
          </div>
          <!-- Modal footer -->
          <div class="modal-footer">
            <button type="submit" class="btn btn-primary">Yes</button>
            <button type="button" class="btn btn-danger" data-bs-dismiss="modal">No</button>
          </div>
        </div>
      </form>
    </div>
  </div>

  <!-- The Modal import-->
  <div class="modal" id="frmCSV">
    <div class="modal-dialog">
      <div class="modal-content">
        <form action="" method="post">
          <input type="hidden" name="do" value="csv">
          <!-- Modal Header -->
          <div class="modal-header">
            <h1 class="modal-title" id="frmITitulo">Import</h1>
            <button type="button" class="close" data-bs-dismiss="modal">×</button>
          </div>
          <!-- Modal body -->
          <div class="modal-body">
            <h3 class="tbTitle">Table Title</h3>
            <p> The fields must be imported on this order: <code id="importLst">First,Secund,Third,Last</code></p>
            <p> You may add a <code>,</code> on the end of the line</p>
            <div class="row">
              <div class="col-sm-12">
                <div class="form-group">
                  <label for="comment">Lines to be added:</label>
                  <textarea class="form-control" rows="10" id="txtCSV" name="txtCSV"></textarea>
                </div>
              </div>
              <div class="col-sm-12">
                <div class="form-group">
                  <input type="checkbox" id="doUpdate" name="doUpdate" >
                  <label for="comment">Se existe o registo actualiza-o:</label>
                  
                </div>
              </div>
            </div>
          </div>
          <!-- Modal footer -->
          <div class="modal-footer">
            <div class="form-group">
              <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Close</button>
              <button class="btn btn-primary" aria-hidden="true" type="submit">Import</button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>


    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <!-- Bootstrap Bundle JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- DataTables JS -->
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.25/js/jquery.dataTables.js"></script>
    <!-- DataTables Buttons JS -->
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/buttons/1.7.1/js/dataTables.buttons.min.js"></script>
    <!-- jsPDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.3.1/jspdf.umd.min.js"></script>
    <!-- jsPDF AutoTable -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.12/jspdf.plugin.autotable.min.js"></script>
    <!-- FileSaver.js for CSV export -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <!-- Custom script -->
    <script src="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote.min.js"></script>
    <script id="textAreaS">
      //caixa de mensagens
      $(document).ready(function() {
        $('#textAreaN').summernote();
      });
    </script>
    <script>
$(document).ready(function() {
    // Initialize DataTable
    var table = $('#example').DataTable({
        pageLength: 20,
        dom: '<"top">rt<"bottom"ip><"clear">',
        buttons: []
    });

    // Search functionality
    $('#searchBox').on('keyup', function() {
        table.search(this.value).draw();
    });

    // Export to CSV
    $('#exportCsv').on('click', function() {
        var csv = 'Name,Position,Office,Age,Start date,Salary\n';
        table.rows({ search: 'applied' }).every(function() {
            var data = this.data();
            csv += data.join(',') + '\n';
        });

        var blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
        saveAs(blob, 'data.csv');
    });

    // Export to PDF
    $('#exportPdf').on('click', function() {
        var { jsPDF } = window.jspdf;
        var doc = new jsPDF();

        var header = [["Name", "Position", "Office", "Age", "Start date", "Salary"]];
        var data = [];
        table.rows({ search: 'applied' }).every(function() {
            var row = this.data();
            data.push(row);
        });

        doc.autoTable({
            head: header,
            body: data
        });

        doc.save('data.pdf');
    });
});


    </script>
</body>
</html>
